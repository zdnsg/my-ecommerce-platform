校速达 (SchoolDash) - 校园超市配送平台 - 产品需求文档 (PRD)

版本: 1.5 (深度扩展版)
日期: 2025年11月10日

1. 项目概述

1.1 项目目标

本项目（校速达 SchoolDash）旨在构建一个专注于校园内部的超市商品即时配送平台，解决“校内最后500米”的购物痛点。

对于用户（学生/教职工）： 平台是用户的“掌上云超市”。用户（尤其是“懒人经济”下的学生，或在恶劣天气、期末复习等不便出门的场景下）可以享受“下单即送”的便捷服务。提供一个便捷、快速、商品丰富的在线超市，下单后可在极短时间（例如承诺的30分钟）内收到商品，解决校园内的即时购物需求。

对于平台（运营方）： 平台是高效的“校园零售连接器”。利用校园用户密度高、配送路线固定、需求集中的特点，构建一个高效的商品库存管理、订单处理、骑手调度系统。通过技术手段实现精细化运营，保障配送履约，建立稳定的校园商业模型。

对于平台（骑手）： 平台是灵活的“兼职工作站”。为校内学生（或其他骑手）提供一个清晰、易用、路线熟悉的接单和配送指引工具，通过灵活的工作时间获取额外收入。

1.2 核心模块

本项目包含以下六个高度关联的核心模块，它们共同构成了完整的业务闭环：

用户模块 (登录注册): 平台的基础，解决“谁在买，送到哪”的问题。管理所有用户（买家）身份及其关键的配送地址信息。

商品模块 (超市商品展示): 平台的核心，解决“能买啥”的问题。负责超市商品的呈现、分类、搜索和实时库存展示。

购物车模块 (加购): 连接商品和订单的桥梁，解决“准备买啥”的问题。提供商品暂存、编辑和批量结算功能。

订单模块 (下单与配送): 交易流程的核心，解决“如何买、如何送”的问题。处理从下单、支付、履约到售后的完整闭环。

后台管理模块 (运营中枢): 平台的“大脑”，解决“如何管理”的问题。支撑平台运营，管理商品、订单、库存、骑手和财务结算。

配送端（骑手）模块: 支撑配送履约的“双腿”，解决“谁来送、怎么送”的问题。这是即时配送平台成败的关键。

2. 核心模块需求与验收标准

2.1 用户模块 (登录/注册)

模块描述: 提供用户访问平台和进行购买的基础认证功能，并管理用户个人信息。

2.1.1 功能需求 (FR)

FR1 (注册): 用户应能通过手机号进行快速注册。

FR1.1: 注册流程：输入手机号 -> 点击获取验证码 -> 输入6位短信验证码 -> 设置密码（需二次确认）。

FR1.2: “获取验证码”按钮点击后应有60秒倒计时，期间按钮置灰显示“xx秒后重发”。

FR1.3: (可选) 首次使用时，要求用户选择所在校区及绑定学生/教工信息（输入学号/工号），以便进行配送范围校验和身份认证。

FR1.4: 密码需进行加密存储，并有强度要求（如：6-20位，至少包含字母和数字）。

FR2 (登录):

FR2.1: 已注册用户应能使用“手机号+密码”或“手机号+验证码”登录。

FR2.2: 提供“忘记密码”功能，通过手机验证码重置密码。

FR2.3: (可选V2.0) 支持微信等第三方一键授权登录，首次登录需绑定手机号。

FR3 (用户中心): 登录后，用户应能访问个人中心。

FR3.1: 查看和编辑个人基本信息（如昵称、头像上传）。

FR3.2: 配送地址管理： 核心功能。支持对校内配送点进行增、删、改、查。

FR3.3: 地址信息应为结构化数据，以提高配送效率，例如：[校区] - [XX宿舍楼/XX教学楼] - [楼层] - [房间号/详细地址]。

FR3.4: 支持设置一个“默认配送地址”。

FR3.5: (可选) 提供“我的优惠券”、“我的评价”、“联系客服”等入口。

FR4 (退出登录): 用户应能随时安全退出登录，清除本地登录凭证。

2.1.2 验收标准 (AC)

AC1 (注册):

成功注册后，用户状态变为“已登录”并跳转到首页。

输入已注册手机号，提示“该手机号已被注册”。

输入无效验证码或验证码过期，提示“验证码错误或已失效”。

两次输入密码不一致，实时提示“两次密码输入不一致”。

输入非平台服务范围的校区（如有），应提示“暂不支持该校区”。

AC2 (用户中心):

用户可以成功添加最多10个校内配送地址。

用户设置“默认地址”后，该地址在地址列表中置顶，并在下单时优先预填。

删除地址时，需有二次确认弹窗（“您确定要删除该地址吗？”）。

新增第一个地址时，应自动设为默认地址。

2.2 商品模块 (超市商品展示)

模块描述: 向用户清晰展示校内超市的在售商品及库存。

2.2.1 功能需求 (FR)

FR1 (首页/商品列表页):

FR1.1: 首页应突出显示商品分类（如：零食、饮品、速食、日用、文具）。

FR1.2: 首页应有明显入口（如Banner）提示“XX分钟送达”、“配送费”及“起送价”。

FR1.3: 首页应有“促销专区”、“新品上架”等运营活动板块。

FR1.4: 以网格或列表形式展示商品列表。

FR1.5: 每个商品项应显示主图、商品名称、价格、实时库存状态（如：有货/仅剩N件/已售罄）。
S * FR1.6: 支持关键词搜索商品，应有“搜索发现”（热门搜索词）和“历史搜索”功能。

FR1.7: 实时库存（核心）： 商品若已售罄，应在列表页置灰或显示“已售罄”，不可加入购物车。库存紧张时（如<5件），应显示“仅剩N件”。

FR2 (商品详情页 - PDP):

FR2.1: 展示商品轮播图、完整标题、价格、详细描述（如规格、保质期、产地）。

FR2.2: (可选) 由于是即时配送（商品多为快消品，决策成本低），PDP 页面可以简化，重点放在快速加购。

FR2.3: 必须清晰展示商品实时库存，库存不足时应有提示。

FR2.4: (可选V2.0) 展示“购买该商品的人还买了”等关联推荐。

2.2.2 验收标准 (AC)

AC1 (PLP):

搜索、分类筛选功能均能正确返回结果。

“已售罄”商品不可点击“加入购物车”。

“仅剩N件”的商品，在加购时数量选择器上限不能超过N。

首页能正确显示预计配送时间（如：后台配置为30分钟，前台显示“预计30分钟送达”）。

AC2 (PDP):

“加入购物车”按钮，在库存为0时应置灰。

商品详情页的库存应与列表页、购物车、后台库存保持强一致性。

(并发测试) 多个用户同时购买最后一件商品时，只有一人能成功下单。

2.3 购物车模块 (加购)

模块描述: 允许用户临时存储意向购买的商品，并进行分组、编辑和批量结算。

2.3.1 功能需求 (FR)

FR1 (添加商品):

FR1.1: 在列表页或详情页，点击“加入购物车”。

FR1.2: 添加成功后应有明显提示（如：商品飞入购物车动画）。

FR1.3: 底部导航栏的购物车图标应实时显示商品种类数量角标。

FR2 (查看购物车):

FR2.1: 用户可进入购物车页面，查看所有已添加的商品列表。

FR2.2: 购物车页面应有“空购物车”状态（显示“购物车空空如也”和“去逛逛”按钮）。

FR2.3: (可选) 在购物车页面推荐“凑单商品”。

FR3 (编辑购物车):

FR3.1: 在购物车页面，可修改商品数量（通过加减按钮或手动输入）。

FR3.2: 可删除单个或批量删除商品。

FR3.3: 结算:

每项商品前有勾选框。

底部结算栏提供“全选”按钮。

底部结算栏实时计算已勾选商品的总价。

FR4 (状态处理):

FR4.1: 在购物车结算时，需再次校验库存。若有商品已售罄或库存不足，应在购物车页面明显提示该商品（如：“库存不足”），并阻止该商品结算。

FR4.2: 购物车中的商品，若价格发生变动，应提示用户“商品价格已更新”。

2.3.2 验收标准 (AC)

AC1 (添加):

添加商品数量超过库存时，应提示“库存不足，最多可添加N件”，并自动将数量设为N。

AC2 (编辑):

修改数量时，总价实时更新。

手动输入数量时，需校验：必须为>0的整数，且不能超过库存。输入非法值时自动恢复为1或库存最大值。

AC3 (结算):

点击“结算”按钮时，若总价（扣除商品优惠后）低于“起送价”，应提示“还差XX元起送”，按钮置灰或点击后提示。

若勾选的商品中包含已失效（售罄）商品，点击“结算”时应提示用户“请先移除失效商品”。

2.4 订单模块 (下单与配送)

模块描述: 用户确认购买信息、完成支付，平台生成并履约即时配送订单。

2.4.1 功能需求 (FR)

FR1 (订单确认页):

FR1.1: 从购物车结算后，进入此页面。

FR1.2: 配送地址: 必须显示默认配送地址（校内），并提供切换/新增入口。若无地址，应强制引导用户添加。

FR1.3: 商品清单: 列表显示待结算的商品信息（名称、规格、数量、单价）。

FR1.4: 配送信息: 清晰显示预计送达时间（如：30分钟内）、配送费。

FR1.5: (可选) 优惠券选择、积分抵扣。

FR1.6: 备注: 提供“订单备注”输入框（如：少冰、放宿舍楼下）。

FR1.7: 金额明细: 清晰显示订单总金额，包括：商品总额 + 配送费 + 打包费(可选) - 优惠金额 = 实付金额。

FR2 (创建订单):

FR2.1: 用户点击“提交订单”后，系统锁定库存（采用悲观锁或Redis事务），生成订单，状态为“待支付”。

FR2.2: 订单超时: 待支付订单应有支付时限（如10分钟，即时配送场景时效很短），超时后订单自动取消，并释放库存。

FR3 (支付): (集成微信、支付宝等)

FR3.1: 提交订单后跳转到支付选择页（收银台），显示倒计时。

FR3.2: 支付成功后，系统接收支付回调，订单状态自动更新为 “待接单” (或“待备货”)。

FR3.3: 支付失败或取消支付，订单状态仍为“待支付”。

FR4 (订单列表与状态):

FR4.1: 用户可在“我的订单”中查看所有订单。

FR4.2: 订单状态流转（用户视角）：

待支付: 等待用户付款。

待接单: (支付成功) 等待商家确认订单。

备货中: 商家已接单，正在分拣商品。

配送中: 骑手已取货，正配送往目的地。

已送达: 用户已收到商品（骑手点击送达或用户确认）。

已取消: 支付超时或用户/商家取消。

FR4.3: 支持按订单号或商品名称搜索订单。

FR5 (订单操作):

FR5.1: (待支付) 可进行“取消订单”或“去支付”。

FR5.2: (待接单) 可进行“申请退款”（此时商家未备货，应快速退款）。

FR5.3: (备货中) 不可取消订单，但可“申请退款”（需商家同意）。

FR5.4: (配送中) 可进行“查看骑手位置”（可选V2.0）和“电话联系骑手”。

FR5.5: (已送达) 可进行“评价商品/骑手”、“申请售后”。

2.4.2 验收标准 (AC)

AC1 (创建订单):

提交订单时，若未选配送地址，提交失败并提示。

提交订单时，若库存不足（被他人抢先），提交失败并提示用户“哎呀，部分商品被抢光了，请返回购物车修改”。

AC2 (支付):

支付成功的回调能正确更新订单状态为“待接单”。

“待支付”订单超过10分钟后，状态自动变为“已取消”，且库存正确回滚。

AC3 (订单列表): 订单列表按状态筛选功能正常，订单状态显示准确。

AC4 (状态同步): 当骑手在配送端更新状态（如“已取货”），用户端的订单状态应实时（或准实时，通过WebSocket或轮询）更新为“配送中”。

2.5 后台管理模块 (运营中枢)

模块描述: 平台管理员用于维护商品、库存、处理订单和调度配送的核心后台。

2.5.1 功能需求 (FR)

FR1 (安全/登录): 管理员需使用专属账号密码登录后台。支持多角色权限（如：超级管理员、运营、备货员、客服）。

FR2 (数据看板 - 首页):

FR2.1: 展示核心运营数据：今日订单数、今日销售额、待处理事务（待接单、待备货订单）、在线骑手数、实时配送中订单、客单价、复购率。

FR2.2: (可选) 销售趋势图、热销商品Top 5。

FR3 (商品管理):

FR3.1: 分类管理: 支持商品分类的增、删、改、查（树形结构）。

FR3.2: 商品列表: 查看所有商品，支持多条件筛选（分类、上下架状态、库存区间）。

FR3.3: 新增/编辑商品:

需支持填写：标题、分类、主图、详情、价格、打包费(可选)。

库存管理（核心）： 必须支持实时库存的增减（如：入库、出库、盘点）。

FR3.4: 操作: 支持商品“上架”、“下架”操作。支持批量导入、批量修改库存。

FR4 (订单管理):

FR4.1: 订单列表（即时单）: 查看所有订单列表，并支持按状态、订单号、用户手机号、骑手、下单时间范围搜索。

FR4.2: 订单处理（核心）：

“待接单”订单应有明显提示（如声音、弹窗）。

管理员（或备货员）点击“接单”，订单变为“备货中”。

备货完成后，管理员点击“呼叫骑手”或“备货完成”。

FR4.3: 派单/调度:

（手动模式）可将“备货完成”的订单指派给特定骑手。

（自动模式）系统自动向附近骑手派单（见2.6）。

FR4.4: (可选) 异常订单处理：如用户申请退款、配送超时等。

FR5 (用户管理):

FR5.1: 查看用户列表，支持按手机号、用户名、注册时间搜索。

FR5.2: 可对用户进行“禁用/启用”操作。

FR6 (骑手管理):

FR6.1: 骑手信息录入与审核（姓名、电话、(可选)学生认证）。

FR6.2: 查看骑手状态（在线/离线/配送中），(可选V2.0)查看骑手实时位置。

FR6.3: (可选) 骑手绩效统计（配送单数、好评率、平均配送时长）。

FR6.4: (可选) 骑手结算管理（每单提成、周/月结算）。

2.5.2 验收标准 (AC)

AC1 (商品管理):

在后台修改某商品库存为0，前台所有该商品立即变为“已售罄”状态。

批量导入100个商品，系统能正确处理，并在前台显示。

AC2 (订单管理):

后台点击“接单”，用户端订单状态立即变为“备货中”。

后台将订单指派给骑手A，骑手A的配送端能立即收到订单（强提示）。

订单搜索功能在1秒内返回准确结果。

2.6 配送端（骑手）模块

模块描述: 供骑手（可为兼职学生）使用的接单和配送工具（可为小程序或简版APP）。

2.6.1 功能需求 (FR)

FR1 (登录/状态): 骑手使用专属账号登录。可切换“上班”（开始接单）和“下班”（不接单）状态。

FR2 (订单（抢单/派单）):

（抢单模式）“上班”状态的骑手能看到订单池中的新订单（显示订单金额、取/送货点、距离），并进行“抢单”。

（派单模式）系统推送的订单，骑手可“接受”或“拒绝”（需理由）。

FR2.1: (可选V2.0) 订单捆绑：系统可将同一宿舍楼的多个订单捆绑派发给同一骑手。

FR3 (配送流程):

FR3.1: 接受订单后，骑手看到订单详情（商品清单、取货地点-超市、送货地点-宿舍、订单备注）。

FR3.2: 骑手到超市取货后，点击“已取货”。（此时用户订单变为“配送中”）

FR3.3: 骑手将商品送达后，点击“已送达”。（订单完成）

FR3.4: (可选) 异常上报：如联系不上用户、商品破损等。

FR3.5: 提供一键“电话联系用户”功能。

FR4 (统计): 骑手可查看当日完成单数和收入明细（如有）。

2.6.2 验收标准 (AC)

AC1 (接单): 骑手能成功抢到/接收订单，并看到清晰的取/送货信息。

AC2 (状态同步): 骑手点击“已取货”，后台和用户端的订单状态在3秒内正确流转。

AC3 (状态同步): 骑手点击“已送达”，订单流程关闭，进入“待评价”状态。

AC4 (离线/在线): 骑手切换为“下班”状态后，不应再收到任何新订单推送。

3. 关键页面原型描述 (概念)

P1: 首页 (Home - 校速达)

布局: 顶部为校区/配送地址（如：XX校区-XX宿舍楼）和“XX分钟送达”的承诺。

内容: 搜索框、Banner（促销活动）、核心商品分类入口（图标宫格，如：饮料、零食、泡面、日用）、“促销专区”、“热门抢购”商品流。

导航: 底部 Tab Bar (固定)：首页、分类、购物车(带角标)、我的。

交互: 下拉刷新，上拉加载。

P2: 商品列表页 (PLP)

布局: 顶部为搜索框/返回按钮。左侧为超市分类（如：饮料->碳酸->可乐），支持二级联动。

内容: 右侧为商品卡片网格，卡片上应有“+”（快速加购）按钮。

交互: 已售罄商品“+”按钮置灰。点击“+”号后，变为数量加减器。

P3: 商品详情页 (PDP)

**（简化）**可省略此页面，或作为弹窗展示。重点是展示规格、库存、图文详情。

P4: 购物车 (Cart)

布局: 顶部为“购物车(N)”和“管理”按钮。

内容: 商品列表，包含商品图、标题、规格、价格、数量加减器。失效商品置灰，并显示“已失效”标签。

交互: 底部固定结算栏：左侧“全选”勾选框、中部“合计：¥XXXX”（实时计算）、右侧“去结算(N)”按钮。若未达起送价，按钮显示“还差XX元起送”。

P5: 订单确认页 (Checkout)

布局: 顶部显示校内配送地址卡片（XX宿舍楼 XXX房间，张三，138XXXX）。

内容: 中部为商品清单。下方为“配送费”、“预计送达时间”、“订单备注”、“优惠券”。

交互: 底部固定操作栏：左侧显示“应付总额：¥XXXX”，右侧为“提交订单”按钮。

P6: 订单详情页 (Order Status)

布局: 顶部应有订单状态的实时跟踪（图形化）。

状态轴: [已支付/待接单] -> [已接单/备货中] -> [配送中] -> [已送达]

内容: “配送中”状态下，应显示骑手信息（姓氏、电话）。（可选V2.0）显示骑手实时位置（简易地图）。

P7: 后台 - 即时订单看板 (Admin)

布局: 类似看板（Kanban）视图，用于大屏展示。

内容: 分为几栏：“待接单”（新订单在此闪烁并伴有提示音）、“备货中”（显示备货员）、“待派送”（等待骑手接单）、“配送中”（显示骑手）。

交互: 订单卡片可拖拽（或点击）流转到下一状态。

P8: 骑手端 - 订单页 (Rider App)

布局: 简洁的列表或卡片。

内容: 新订单弹窗/列表。点击接单后，显示清晰的“取”（超市地址）和“送”（XX宿舍楼）地址。

交互: 底部有醒目的按钮：“我已取货”、“我已送达”。